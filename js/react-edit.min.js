/*!
  ___                         _       ___        _     _   
|  _`\                      ( )_    (  _`\     ( ) _ ( )_ 
| (_) )   __     _ _    ___ | ,_)   | (_(_)   _| |(_)| ,_)
| ,  /  /'__`\ /'_` ) /'___)| |     |  _)_  /'_` || || |  
| |\ \ (  ___/( (_| |( (___ | |_    | (_( )( (_| || || |_ 
(_) (_)`\____)`\__,_)`\____)`\__)   (____/'`\__,_)(_)`\__)
                                                          
                                                          
 
*/
require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){},{}],2:[function(a,b){function c(a){console.log(a);var b=a.components.map(d),c=i.jsxbanner+"\n"+b.join("\n\n");try{var e=JSXTransformer.transform(c).code}catch(g){return"<pre style='color: #702'><h3>Error processing the files</h3>"+JSON.stringify(g,null,4)+"</pre>"}var h=f(i.html,{javascript:e});return h}function d(a){var b=[];g(a.methods,function(a,c){b.push(h.method(a,c))});var c=h.createClass(a.name,b.join(",\n\n")),d=h.set(a.name,c),e=h.get(a.depends,d);return e}function e(a,b){for(var c=function(a){return d+a.trim().split("\n").join("\n"+d)},d="";d.length<2*a;)d+="  ";return arguments.length>1?c(b):c}function f(a,b){if(!b)return f.bind(null,a);var c=Object.prototype.hasOwnProperty;return a.replace(/\$(\w+)\$/g,function(a,d){return c.call(b,d)?b[d]:a})}function g(a,b){var c,d={}.hasOwnProperty;for(c in a)d.call(a,c)&&b(c,a[c])}b.exports=c;var h={createClass:function(a,b){return f("React.createClass({displayName: '$name$',\n$code$\n    })",{name:a,code:e(2,b)})},get:function(a,b){if(0===a.length)return b;var c=JSON.stringify(a.map(function(a){return a.name})),d=a.map(function(a){return a.alias||a.name.replace(/\W+/,"")}).join(", "),g="dep.get($names$, function($aliases$){\n$code$\n});\n";return f(g,{names:c,aliases:d,code:e(1,b.trim())})},set:function(a,b){return f("dep.set('$name$', $code$\n);",{name:a,code:b})},method:function(a,b){var c=e(1,b.code);return f("$name$: function($args$){ \n$code$\n}",{name:a,code:c.trim(),args:b.args})}},i=(a("fs"),{html:'<!doctype html>\n<html lang="en">\n<head>\n  <meta charset="utf-8">\n\n  <title>$name$</title>\n</head>\n<div id="application"></div>\n<body>\n  <script src="/js/vendor/react.min.js"></script>\n  <script src="/js/vendor/cortex.js"></script>\n  <script>\n var dep={set:function(i,t){this._modules[i]=t,this._waiting[i]&&this._waiting[i].forEach(function(i){i()})},get:function(i,t){var n=i.length,e=[],l=this._modules,s=this._waiting,h=function(){0===n&&t.apply(null,e)};i.forEach(function(i,t){if(l[i])e[t]=l[i],n--,h();else{var o=s[i]=s[i]||[],u=o.length;o.push(function(){e[t]=l[i],n--,1===o.length?delete s[i]:o.splice(u,1),h()})}})},_modules:{},_waiting:{}}\n  </script>\n  <script>\n$javascript$\n\ndep.get(["App"], function(App){\n    React.renderComponent(\n        App(null),\n        document.getElementById(\'application\')\n    );\n});\n  </script>\n</body>\n</html>',jsxbanner:"/** @jsx React.DOM */"})},{fs:1}],3:[function(a,b){function c(a,b,c){return{code:(a||"")+"\n\n",args:b||"",defaultOpen:c||!1,isDefault:!0}}function d(){return{render:c("return <div />","",!0),componentDidMount:c("","rootNode",!0),componentWillUnmount:c("var rootNode = this.getDOMElement();","",!0),getInitialState:c("return {}","",!0),shouldComponentUpdate:c("","nextProps, nextState"),componentWillReceiveProps:c("","nextProps"),componentWillMount:c(),componentWillUpdate:c(),componentDidUpdate:c()}}b.exports=d},{}],4:[function(a,b){function c(){var a=new g;return a.set("data",f.getValue()),a.save().then(function(a){window.snap=a,window.location.hash="#/"+a.get("hash")})}function d(a){var b=new Parse.Query(g);return b.equalTo("hash",a),b.first()}function e(a){f=a}var f,g=Parse.Object.extend("Snapshot");b.exports={save:c,get:d,setCortex:e}},{}],5:[function(a){function b(){7===window.location.hash.length&&d.get(window.location.hash.slice(2)).then(function(a){console.log(a);var b=a.get("data");g.set(b)})}var c=a("./jsx/application.jsx"),d=a("./api/parse"),e=a("./api/getDefaultMethods"),f={components:[{name:"App",methods:e(),depends:[]},{name:"Common",methods:{_:{code:"// put reusable code in \n// submodules of Common",args:"",defaultOpen:!0}},depends:[]}],settings:{},activeComponent:""};b(),window.addEventListener("hashchange",b,!1);var g=new Cortex(f,function(a){h.setProps({data:a})});d.setCortex(g);var h=window.app=c({data:g});React.renderComponent(h,document.getElementById("application"))},{"./api/getDefaultMethods":3,"./api/parse":4,"./jsx/application.jsx":6}],6:[function(a,b){var c=a("./common/split.jsx"),d=a("./menu/menu.jsx"),e=a("./code/code.jsx"),f=a("./preview/preview.jsx"),g=React.createClass({displayName:"Application",render:function(){return c(null,d({data:this.props.data}),e({component:this.getActiveComponent()}),f({data:this.props.data}))},getActiveComponent:function(){var a=function(a){return function(b){return a===(b.getValue?b.getValue().name:b.name)}},b=this.props.data,c=b.get("activeComponent"),d=c.getValue(),e=b.get("components");return e.find(a(d))}});b.exports=g},{"./code/code.jsx":7,"./common/split.jsx":"dTPj4o","./menu/menu.jsx":18,"./preview/preview.jsx":19}],7:[function(a,b){var c=a("../common/accordion.jsx"),d=a("../common/CodeMirror.jsx"),e=a("./welcome.jsx"),f=React.createClass({displayName:"Code",render:function(){var a=this.props.component;if(!a)return e(null);var b=[];return a.get("methods").forEach(function(e,f){var g=a.get("name").getValue()+"-"+e;console.log(g);var h=f.get("code"),i=f.get("args"),j=function(a){i.set(a.target.value)};b.push(c({key:g,title:e,defaultOpen:f.get("defaultOpen").getValue()},React.DOM.input({value:i.getValue(),onChange:j,placeholder:"...args",className:"args"}),d({code:h.getValue(),onChange:h.set.bind(h)})))}),React.DOM.div({className:"re-code"},b)}});b.exports=f},{"../common/CodeMirror.jsx":9,"../common/accordion.jsx":"PSgpg7","./welcome.jsx":8}],8:[function(a,b){var c=function(){return React.DOM.div(null,React.DOM.h2(null,"Click on a component to start editing!"),React.DOM.ul(null,React.DOM.li(null,"the big green 'New' button creates a sub module"),React.DOM.li(null,"App is the main entry point"),React.DOM.li(null,"Press 'Save' to get a permalink to your creation"),React.DOM.li(null,"(this project is new, help ",React.DOM.a({href:"https://github.com/brigand/react-edit"},"work out the kinks on GitHub)"))))};b.exports=c},{}],9:[function(a,b){function c(a,b){var c=new XMLHttpRequest;c.open("get",a,!0),c.send(),c.onreadystatechange=function(){if(4==c.readyState){if(c.status<400)return b(null,c.responseText);var a=new Error(c.responseText||"No response");a.status=c.status,b(a)}}}function d(a){var b=function(){a.setOption("extraKeys",{"Ctrl-Space":function(a){h.complete(a)},"Ctrl-I":function(a){h.showType(a)},"Alt-.":function(a){h.jumpToDef(a)},"Alt-,":function(a){h.jumpBack(a)},"Ctrl-Q":function(a){h.rename(a)}}),a.on("cursorActivity",function(a){h.updateArgHints(a)})};if(h)b();else{var c=i||function(){};i=function(){console.log("cb"),c(),b()}}}function e(a,b){var c={}.hasOwnProperty;for(var d in b)c.call(b,d)&&(a[d]=b[d]);return a}var f=window.CodeMirror,g=React.createClass({displayName:"CodeMirrorComponent",getOptions:function(){var a=e({mode:"javascript",lineNumbers:!0,theme:"ambiance",viewportMargin:1/0},this.props.config||{});return console.log(a),a},updateCode:function(){this.cm.setValue(this.props.code)},codeChanged:function(a){this.userChangedCode=!0,this.props.onChange&&this.props.onChange(a.getValue())},componentDidMount:function(a){window.cm=this.cm=f(a,this.getOptions()),d(this.cm),this.cm.on("change",this.codeChanged),this.updateCode()},componentDidUpdate:function(){this.updateCode()},componentWillUnmount:function(){this.cm.off("change",this.codeChanged)},render:function(){return React.DOM.div(null)},shouldComponentUpdate:function(a){return this.userChangedCode?(this.userChangedCode=!1,!1):a.code!==this.props.code}});b.exports=g;var h,i;c("http://ternjs.net/defs/ecma5.json",function(a,b){if(a)throw new Error("Request for ecma5.json: "+a);h=new CodeMirror.TernServer({defs:[JSON.parse(b)]}),i&&i()})},{}],PSgpg7:[function(a,b){var c=React.createClass({displayName:"Accordion",getInitialState:function(){return{show:!!this.props.defaultOpen}},toggleBody:function(){this.setState({show:!this.state.show})},render:function(){return React.DOM.div({className:"accordion-component "+(this.props.className||"")},React.DOM.button({className:"expand",onClick:this.toggleBody},this.props.title||" "),React.DOM.div({className:this.state.show?"body show":"body hide"},this.props.children))}});b.exports=c},{}],"common/src/jsx/common/accordion":[function(a,b){b.exports=a("PSgpg7")},{}],"common/src/jsx/common/codemirror":[function(a,b){b.exports=a("2DbuzG")},{}],"2DbuzG":[function(a,b){b.exports=a(9)},{}],dTPj4o:[function(a,b){var c=React.createClass({displayName:"Divider",getInitialState:function(){return{percent:1/this.props.count}},dragStart:function(a){this.isDragging=!0,a.preventDefault()},dragUpdate:function(a){if(this.isDragging){a.preventDefault();var b=this.getDOMNode(),c=b.parentNode.getBoundingClientRect(),d=c.right-c.left,e=(a.pageX-c.left)/d,f=b.previousSibling,g=f.getBoundingClientRect().left,h=g/d,i=e-h;i=Math.max(i,.1),i=Math.min(i,.9),this.setState({percent:i},this.applyPosition)}},applyPosition:function(){var a=this.getDOMNode().previousSibling;a.style.width=100*this.state.percent+"%"},dragEnd:function(){this.isDragging=!1},componentDidMount:function(){window.addEventListener("mousemove",this.dragUpdate,!1),window.addEventListener("mouseup",this.dragEnd,!1),this.applyPosition()},componentWillUnmount:function(){window.removeEventListener("mousemove",this.dragUpdate),window.removeEventListener("mouseup",this.dragEnd)},render:function(){return React.DOM.div({className:"divider",onMouseDown:this.dragStart})}}),d=React.createClass({displayName:"Split",getInitialState:function(){return{}},render:function(){var a=function(a,b,d,e){return a.concat(d===e.length-1?[b]:[b,c({key:d,count:e.length})])}.bind(this);return React.DOM.div({className:this.props.className||"split-component"},this.props.children.reduce(a,[]))}});b.exports=d},{}],"common/src/jsx/common/split":[function(a,b){b.exports=a("dTPj4o")},{}],16:[function(a,b){function c(a){return a.components.map(function(a){return a.getValue().name}).sort().map(function(b){var c=function(){a.active.set(b)};return d({name:b,onClick:c})})}function d(a){for(var b=a.name.split("."),c=b[b.length-1],d=[];d.length<b.length-1;)d.push(React.DOM.span({className:"indent"}));return React.DOM.div({key:a.name,className:"component-item",onClick:a.onClick},1===b.length&&React.DOM.div({className:"spacer"}),d,c)}b.exports=c},{}],17:[function(a,b){function c(a){return a.depends.map(function(a,b){var c=function(){depends.removeAt(b)},d=a.get("alias"),e=function(a){d.set(a.target.value.replace(/\W+/g,""))};return React.DOM.div({className:"depend"},a.get("name").getValue()," with alias ",React.DOM.input({value:d.getValue(),onChange:e}),React.DOM.span({className:"x",onClick:c},"X"))})}var d=React.createClass({displayName:"ComponentSettings",mixins:[a("../../util/CortexMixin")],getInitialState:function(){return{dependsValue:""}},render:function(){var a=this.props.component,b=a.get("depends");if(!a)return React.DOM.div(null,"woops, something is wrong here");var d=a.get("name");return React.DOM.div(null,React.DOM.label(null," Name: ",React.DOM.input({value:d.getValue(),onChange:this.handleNameChange})),React.DOM.label(null," Depends: ",React.DOM.input({value:this.state.dependsValue,onChange:this.handleDependsValueChange,onKeyPress:this.handleDependsSubmit})),c({depends:b}),React.DOM.div({className:"delete"}," delete component ",React.DOM.span({className:"x"},"X")))},handleNameChange:function(a){this.props.component.get("name").set(a.target.value),this.props.active.set(a.target.value)},handleDependsValueChange:function(a){this.setState({dependsValue:a.target.value})},handleDependsSubmit:function(a){if(13===a.which){var b=this.props.component,c=b.get("depends"),d=a.target.value;c.push({name:d,alias:d.replace(/\W+/,"")}),this.setState({dependsValue:""})}}});b.exports=d},{"../../util/CortexMixin":20}],18:[function(a,b){var c=a("../common/accordion.jsx"),d=a("./component-list.jsx"),e=a("./component-settings.jsx"),f=a("../../api/parse"),g=a("../../api/getDefaultMethods"),h=React.createClass({displayName:"Menu",render:function(){var a=this.props.data,b=a.get("activeComponent"),g=b.getValue(),h=a.get("components");return React.DOM.div({className:"re-menu"},c({title:"Settings",defaultOpen:!0},React.DOM.button({onClick:f.save},"Save")),c({title:"Components",className:"components",defaultOpen:!0},d({components:h,active:b}),React.DOM.button({className:"success",onClick:this.addComponent},"new")),g&&c({title:g,defaultOpen:!0},e({component:this.getActiveComponent(),active:b})))},addComponent:function(){for(var a=this.props.data,b=a.get("activeComponent"),c=b.getValue(),d=a.get("components"),e="Ain,Blar,Cin,Das,Eog,Fiz,Guj,Hab,Ien,Jia,Kop,Lun,Mel,Ner,Omp,Pik,Qub,Rel,Sug,Ter,Und,Ven,Wex,Xul,Yat,Zep".split(","),f="";f.length<9;)f+=e[Math.floor(Math.random()*e.length)];var h=c?c+"."+f:f,i={name:h,depends:[],methods:g()};d.push(i),b.set(h)},getActiveComponent:function(){var a=function(a){return function(b){return a===(b.getValue?b.getValue().name:b.name)}},b=this.props.data,c=b.get("activeComponent"),d=c.getValue(),e=b.get("components");return e.find(a(d))}});b.exports=h},{"../../api/getDefaultMethods":3,"../../api/parse":4,"../common/accordion.jsx":"PSgpg7","./component-list.jsx":16,"./component-settings.jsx":17}],19:[function(a,b){var c=a("../../api/generate"),d=React.createClass({displayName:"Preview",render:function(){return React.DOM.div({className:"re-preview"},e({srcDoc:c(this.props.data.value)}))}}),e=React.createClass({displayName:"IFrame",render:function(){return React.DOM.iframe(this.props)},componentDidMount:function(){null!=this.props.srcDoc&&(this.getDOMNode().srcdoc=this.props.srcDoc)},componentDidUpdate:function(a){a.srcDoc!==this.props.srcDoc&&(this.getDOMNode().srcdoc=this.props.srcDoc)}});b.exports=d},{"../../api/generate":2}],20:[function(a,b){var c={get:function(a){return a.getValue?a.getValue():a},set:function(a){return function(b){b&&b.target&&null!=b.target.value&&(b=b.target.value),a.set&&a.set(b)}}};b.exports=c},{}]},{},[5]);